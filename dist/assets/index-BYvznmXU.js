import{r,y as B,z as G,A as J,C as O,D as W,E as X,j as e,H as Y,S as Z,h as o,o as $,M as p,I as m}from"./index-VZJwm443.js";import{M as D}from"./MusicList-rLZEFAnV.js";import{M as y}from"./MyPaginate-DnZ-J8KC.js";import{A as ee}from"./AlbumCard-D_h8kNIh.js";import{M as se}from"./MvCard-DQOKbwse.js";import{P as te}from"./PlaylistCard-BTNLiUlq.js";import{S as ae}from"./SingerCard-_-yNqZS2.js";import"./index-Cr30qKkB.js";import"./index-By6yPB7l.js";import"./countTransform--_YRgHiL.js";const ne="_banner_rbdj9_1",re="_search_rbdj9_12",ce="_content_rbdj9_45",ie="_top_rbdj9_45",le="_active_rbdj9_75",de="_bottom_rbdj9_89",ge="_list_rbdj9_89",oe="_paginate_rbdj9_93",he="_empty_rbdj9_98",a={banner:ne,search:re,content:ce,top:ie,active:le,bottom:de,list:ge,paginate:oe,empty:he};function Pe(){const P=r.useRef(null),[s,j]=B(),[u,_]=r.useState(s.get("key")||""),[n,A]=r.useState(s.get("type")!=="song"&&s.get("type")!=="album"&&s.get("type")!=="mv"&&s.get("type")!=="playlist"&&s.get("type")!=="singer"?"song":s.get("type")),[T,N]=r.useState(!1),h=t=>{j({key:s.get("key")||"",type:t})},[x,z]=r.useState(1),[k,{data:c,isFetching:E}]=G(),[v,Q]=r.useState(1),[F,{data:i,isFetching:w}]=J(),[b,K]=r.useState(1),[M,{data:l,isFetching:I}]=O(),[S,V]=r.useState(1),[f,{data:d,isFetching:R}]=W(),[C,q]=r.useState(1),[L,{data:g,isFetching:H}]=X();return r.useEffect(()=>{const t=s.get("key"),U=s.get("type")!=="song"&&s.get("type")!=="album"&&s.get("type")!=="mv"&&s.get("type")!=="playlist"&&s.get("type")!=="singer"?"song":s.get("type");if(t)switch(U){case"album":F({key:t,pn:v});break;case"mv":M({key:t,pn:b});break;case"playlist":f({key:t,pn:S});break;case"singer":L({key:t,pn:C});break;default:k({key:t,pn:x-1});break}},[s,x,k,v,F,b,M,S,f,C,L]),r.useEffect(()=>{A(s.get("type")!=="song"&&s.get("type")!=="album"&&s.get("type")!=="mv"&&s.get("type")!=="playlist"&&s.get("type")!=="singer"?"song":s.get("type")),_(s.get("key")||"")},[s]),e.jsx(e.Fragment,{children:e.jsxs("main",{children:[e.jsx("div",{className:a.banner,children:e.jsxs("div",{className:a.search,children:[e.jsx("input",{ref:P,value:u,onChange:t=>{_(t.target.value)},onKeyUp:t=>{t.key==="Enter"&&j({key:u,type:n})},onFocus:()=>{N(!0)},placeholder:"搜索音乐/MV/歌单/歌手",type:"text"}),e.jsx(Y,{onClick:()=>j({key:u,type:n})}),e.jsx(Z,{searchKey:u,canShow:T,refInput:P,setCanShow:N})]})}),e.jsxs("div",{className:o(a.content,"container"),children:[e.jsxs("div",{className:a.top,children:[e.jsx("h2",{children:"搜索结果"}),e.jsxs("ul",{children:[e.jsx("li",{onClick:()=>h("song"),className:o({[a.active]:n==="song"}),children:"单曲"}),e.jsx("li",{onClick:()=>h("album"),className:o({[a.active]:n==="album"}),children:"专辑"}),e.jsx("li",{onClick:()=>h("mv"),className:o({[a.active]:n==="mv"}),children:"MV"}),e.jsx("li",{onClick:()=>h("playlist"),className:o({[a.active]:n==="playlist"}),children:"歌单"}),e.jsx("li",{onClick:()=>h("singer"),className:o({[a.active]:n==="singer"}),children:"歌手"})]})]}),e.jsx("div",{className:a.bottom,children:E||w||I||R||H?e.jsx($,{style:{marginTop:"80px"}}):n==="song"?e.jsx(e.Fragment,{children:c!=null&&c.data&&c.data.length!==0?e.jsxs(e.Fragment,{children:[e.jsx(D,{list:c==null?void 0:c.data,type:"search"}),e.jsx("div",{className:a.paginate,children:e.jsx(y,{currentPage:x,pageCount:Math.ceil(+c.total/20),setCurrentPage:z})})]}):e.jsxs("div",{className:a.empty,children:[e.jsx(p,{src:m}),e.jsx("p",{children:"找不到相关单曲"})]})}):n==="album"?e.jsx(e.Fragment,{children:i!=null&&i.data&&i.data.albumList?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:a.list,children:i.data.albumList.map(t=>e.jsx(ee,{type:"search",album:t},t.albumid))}),e.jsx("div",{className:a.paginate,children:e.jsx(y,{currentPage:v,pageCount:Math.ceil(+i.data.total/20),setCurrentPage:Q})})]}):e.jsxs("div",{className:a.empty,children:[e.jsx(p,{src:m}),e.jsx("p",{children:"找不到相关专辑"})]})}):n==="mv"?e.jsx(e.Fragment,{children:l!=null&&l.data&&l.data.mvlist?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:a.list,children:l.data.mvlist.map(t=>e.jsx(se,{mv:t},t.id))}),e.jsx("div",{className:a.paginate,children:e.jsx(y,{currentPage:b,pageCount:Math.ceil(+l.data.total/20),setCurrentPage:K})})]}):e.jsxs("div",{className:a.empty,children:[e.jsx(p,{src:m}),e.jsx("p",{children:"找不到相关MV"})]})}):n==="playlist"?e.jsx(e.Fragment,{children:d!=null&&d.data&&d.data.list?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:a.list,children:d.data.list.map(t=>e.jsx(te,{type:"search",playlist:t},t.id))}),e.jsx("div",{className:a.paginate,children:e.jsx(y,{currentPage:S,pageCount:Math.ceil(+d.data.total/30),setCurrentPage:V})})]}):e.jsxs("div",{className:a.empty,children:[e.jsx(p,{src:m}),e.jsx("p",{children:"找不到相关歌单"})]})}):e.jsx(e.Fragment,{children:g!=null&&g.data&&g.data.list?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:a.list,children:g.data.list.map(t=>e.jsx(ae,{singer:t},t.id))}),e.jsx("div",{className:a.paginate,children:e.jsx(y,{currentPage:C,pageCount:Math.ceil(+g.data.total/30),setCurrentPage:q})})]}):e.jsxs("div",{className:a.empty,children:[e.jsx(p,{src:m}),e.jsx("p",{children:"找不到相关歌手"})]})})})]})]})})}export{Pe as default};
